<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Dashboard - Book Management</title>
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
	<link rel="stylesheet" href="css/style.css">
	<link rel="stylesheet" href="css/dashboard.css">
</head>
<body class="bg-light d-flex flex-column min-vh-100">
	<div id="navbarInclude" data-include="../include/navbar.html"></div>
	<div class="layout-wrapper">
		<div id="sidebarInclude" data-include="../include/sidebar.html"></div>
		<div class="sidebar-backdrop" id="sidebarBackdrop"></div>
		<main class="content-area">
			<div class="container-fluid py-4">
				<div class="d-flex justify-content-between align-items-center mb-4">
					<h1 class="text-primary mb-0" style="font-size: 25px;">Dashboard</h1>
					<button class="btn btn-primary activities-toggle-btn" id="toggleActivitiesPanel">
						<!-- <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
							<path d="M3 9.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z"/>
						</svg> -->
						Activities
					</button>
				</div>

				<div class="row">
					<!-- Full Width - Statistics -->
					<div class="col-12">
						<!-- Overdue Alert -->
						<div id="overdueAlert" class="card stat-card overdue-alert mb-4 d-none">
							<div class="card-body d-flex align-items-center">
								<div class="stat-icon bg-white bg-opacity-25 me-3">
									<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 16 16">
										<path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/>
									</svg>
								</div>
								<div class="flex-grow-1">
									<h5 class="mb-1">Overdue Warning!</h5>
									<p class="mb-0">There are <strong id="overdueCount">0</strong> overdue book rentals that need attention.</p>
								</div>
								<a href="index-rental.html?status=overdue" class="btn btn-light btn-sm">View Details</a>
							</div>
						</div>

						<!-- Rental Status Stats -->
						<div class="card border-0 shadow-sm mb-4">
							<div class="card-header bg-white border-0">
								<h5 class="mb-0">Book Rental Statistics</h5>
							</div>
							<div class="card-body">
								<div class="row g-4">
									<!-- Active Rentals -->
									<div class="col-md-4">
										<div class="d-flex align-items-center mb-2">
											<span class="badge bg-success me-2">Active</span>
											<span class="text-muted small">Renting</span>
										</div>
										<div class="d-flex align-items-baseline">
											<span class="h3 mb-0 me-2" id="activeRentals">-</span>
											<span class="text-muted small">/ <span id="totalRentalsForActive">-</span> rentals</span>
										</div>
										<div class="progress progress-stat mt-2">
											<div class="progress-bar bg-success" id="activeProgress" style="width: 0%"></div>
										</div>
									</div>

									<!-- Overdue Rentals -->
									<div class="col-md-4">
										<div class="d-flex align-items-center mb-2">
											<span class="badge bg-danger me-2">Overdue</span>
											<span class="text-muted small">Overdue</span>
										</div>
										<div class="d-flex align-items-baseline">
											<span class="h3 mb-0 me-2" id="overdueRentals">-</span>
											<span class="text-muted small">/ <span id="totalRentalsForOverdue">-</span> rentals</span>
										</div>
										<div class="progress progress-stat mt-2">
											<div class="progress-bar bg-danger" id="overdueProgress" style="width: 0%"></div>
										</div>
									</div>

									<!-- Returned Rentals -->
									<div class="col-md-4">
										<div class="d-flex align-items-center mb-2">
											<span class="badge bg-secondary me-2">Returned</span>
											<span class="text-muted small">Returned</span>
										</div>
										<div class="d-flex align-items-baseline">
											<span class="h3 mb-0 me-2" id="returnedRentals">-</span>
											<span class="text-muted small">/ <span id="totalRentalsForReturned">-</span> rentals</span>
										</div>
										<div class="progress progress-stat mt-2">
											<div class="progress-bar bg-secondary" id="returnedProgress" style="width: 0%"></div>
										</div>
									</div>
								</div>
							</div>
						</div>

						<!-- Main Stats Row -->
						<div class="row g-3 mb-4">
							<!-- Total Books -->
							<div class="col-sm-6 col-xl-4">
								<div class="card stat-card h-100 border-0 shadow-sm" data-href="index.html">
									<div class="card-body">
										<div class="d-flex align-items-center">
											<div class="stat-icon bg-primary bg-opacity-10 text-primary me-3">
												<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 16 16">
													<path d="M1 2.828c.885-.37 2.154-.769 3.388-.893 1.33-.134 2.458.063 3.112.752v9.746c-.935-.53-2.12-.603-3.213-.493-1.18.12-2.37.461-3.287.811V2.828zm7.5-.141c.654-.689 1.782-.886 3.112-.752 1.234.124 2.503.523 3.388.893v9.923c-.918-.35-2.107-.692-3.287-.81-1.094-.111-2.278-.039-3.213.492V2.687zM8 1.783C7.015.936 5.587.81 4.287.94c-1.514.153-3.042.672-3.994 1.105A.5.5 0 0 0 0 2.5v11a.5.5 0 0 0 .707.455c.882-.4 2.303-.881 3.68-1.02 1.409-.142 2.59.087 3.223.877a.5.5 0 0 0 .78 0c.633-.79 1.814-1.019 3.222-.877 1.378.139 2.8.62 3.681 1.02A.5.5 0 0 0 16 13.5v-11a.5.5 0 0 0-.293-.455c-.952-.433-2.48-.952-3.994-1.105C10.413.809 8.985.936 8 1.783z"/>
												</svg>
											</div>
											<div>
												<div class="text-muted small">Total Books</div>
												<div class="stat-number text-primary" id="totalBooks">-</div>
											</div>
										</div>
									</div>
								</div>
							</div>

							<!-- Total Categories -->
							<div class="col-sm-6 col-xl-4">
								<div class="card stat-card h-100 border-0 shadow-sm" data-href="index-genre.html">
									<div class="card-body">
										<div class="d-flex align-items-center">
											<div class="stat-icon bg-success bg-opacity-10 text-success me-3">
												<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 16 16">
													<path d="M2.5 3.5a.5.5 0 0 1 0-1h11a.5.5 0 0 1 0 1h-11zm2-2a.5.5 0 0 1 0-1h7a.5.5 0 0 1 0 1h-7zM0 13a1.5 1.5 0 0 0 1.5 1.5h13A1.5 1.5 0 0 0 16 13V6a1.5 1.5 0 0 0-1.5-1.5h-13A1.5 1.5 0 0 0 0 6v7zm1.5.5A.5.5 0 0 1 1 13V6a.5.5 0 0 1 .5-.5h13a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-.5.5h-13z"/>
												</svg>
											</div>
											<div>
												<div class="text-muted small">Genres</div>
												<div class="stat-number text-success" id="totalCategories">-</div>
											</div>
										</div>
									</div>
								</div>
							</div>

							<!-- Total Authors -->
							<div class="col-sm-6 col-xl-4">
								<div class="card stat-card h-100 border-0 shadow-sm" data-href="index-author.html">
									<div class="card-body">
										<div class="d-flex align-items-center">
											<div class="stat-icon bg-purple bg-opacity-10 text-purple me-3" style="background-color: rgba(111, 66, 193, 0.1); color: #6f42c1;">
												<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 16 16">
													<path d="M12.5 16a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7Zm.5-5v1h1a.5.5 0 0 1 0 1h-1v1a.5.5 0 0 1-1 0v-1h-1a.5.5 0 0 1 0-1h1v-1a.5.5 0 0 1 1 0Zm-2-6a3 3 0 1 1-6 0 3 3 0 0 1 6 0ZM8 7a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z"/>
													<path d="M8.256 14a4.474 4.474 0 0 1-.229-1.004H3c.001-.246.154-.986.832-1.664C4.484 10.68 5.711 10 8 10c.26 0 .507.009.74.025.226-.341.496-.65.804-.918C9.077 9.038 8.564 9 8 9c-5 0-6 3-6 4s1 1 1 1h5.256Z"/>
												</svg>
											</div>
											<div>
												<div class="text-muted small">Authors</div>
												<div class="stat-number" style="color: #6f42c1;" id="totalAuthors">-</div>
											</div>
										</div>
									</div>
								</div>
							</div>

							<!-- Total Publishers -->
							<div class="col-sm-6 col-xl-4">
								<div class="card stat-card h-100 border-0 shadow-sm" data-href="index-publisher.html">
									<div class="card-body">
										<div class="d-flex align-items-center">
											<div class="stat-icon bg-opacity-10 me-3" style="background-color: rgba(253, 126, 20, 0.1); color: #fd7e14;">
												<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 16 16">
													<path d="M1 2a1 1 0 0 1 1-1h11a1 1 0 0 1 1 1v1h.5A1.5 1.5 0 0 1 16 4.5v7a1.5 1.5 0 0 1-1.5 1.5h-.55a2.5 2.5 0 0 1-2.45 2h-8A2.5 2.5 0 0 1 1 12.5V2Zm13 10h.5a.5.5 0 0 0 .5-.5v-7a.5.5 0 0 0-.5-.5H14v8ZM2 2v10.5A1.5 1.5 0 0 0 3.5 14h8a1.5 1.5 0 0 0 1.5-1.5V2H2Z"/>
													<path d="M3 3h9v2H3V3Zm0 3h9v1H3V6Zm0 2h6v1H3V8Z"/>
												</svg>
											</div>
											<div>
												<div class="text-muted small">Publishers</div>
												<div class="stat-number" style="color: #fd7e14;" id="totalPublishers">-</div>
											</div>
										</div>
									</div>
								</div>
							</div>

							<!-- Total Users -->
							<div class="col-sm-6 col-xl-4">
								<div class="card stat-card h-100 border-0 shadow-sm" data-href="index-user.html">
									<div class="card-body">
										<div class="d-flex align-items-center">
											<div class="stat-icon bg-info bg-opacity-10 text-info me-3">
												<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 16 16">
													<path d="M15 14s1 0 1-1-1-4-5-4-5 3-5 4 1 1 1 1h8zm-7.978-1A.261.261 0 0 1 7 12.996c.001-.264.167-1.03.76-1.72C8.312 10.629 9.282 10 11 10c1.717 0 2.687.63 3.24 1.276.593.69.758 1.457.76 1.72l-.008.002a.274.274 0 0 1-.014.002H7.022zM11 7a2 2 0 1 0 0-4 2 2 0 0 0 0 4zm3-2a3 3 0 1 1-6 0 3 3 0 0 1 6 0zM6.936 9.28a5.88 5.88 0 0 0-1.23-.247A7.35 7.35 0 0 0 5 9c-4 0-5 3-5 4 0 .667.333 1 1 1h4.216A2.238 2.238 0 0 1 5 13c0-1.01.377-2.042 1.09-2.904.243-.294.526-.569.846-.816zM4.92 10A5.493 5.493 0 0 0 4 13H1c0-.26.164-1.03.76-1.724.545-.636 1.492-1.256 3.16-1.275zM1.5 5.5a3 3 0 1 1 6 0 3 3 0 0 1-6 0zm3-2a2 2 0 1 0 0 4 2 2 0 0 0 0-4z"/>
												</svg>
											</div>
											<div>
												<div class="text-muted small">Users</div>
												<div class="stat-number text-info" id="totalUsers">-</div>
											</div>
										</div>
									</div>
								</div>
							</div>

							<!-- Total Rentals -->
							<div class="col-sm-6 col-xl-4">
								<div class="card stat-card h-100 border-0 shadow-sm" data-href="index-rental.html">
									<div class="card-body">
										<div class="d-flex align-items-center">
											<div class="stat-icon bg-warning bg-opacity-10 text-warning me-3">
												<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 16 16">
													<path d="M14 4.5V14a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h5.5L14 4.5zm-3 0A1.5 1.5 0 0 1 9.5 3V1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V4.5h-2z"/>
													<path d="M4.5 12.5A.5.5 0 0 1 5 12h3a.5.5 0 0 1 0 1H5a.5.5 0 0 1-.5-.5zm0-2A.5.5 0 0 1 5 10h6a.5.5 0 0 1 0 1H5a.5.5 0 0 1-.5-.5zm1.639-3.708 1.33.886 1.854-1.855a.25.25 0 0 1 .289-.047l1.888.974V8.5a.5.5 0 0 1-.5.5H5a.5.5 0 0 1-.5-.5V8s1.54-1.274 1.639-1.208zM6.25 6a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5z"/>
												</svg>
											</div>
											<div>
												<div class="text-muted small">Rentals</div>
												<div class="stat-number text-warning" id="totalRentals">-</div>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>

						
						<!-- Book Stats -->
						<div class="card border-0 shadow-sm">
							<div class="card-header bg-white border-0">
								<h5 class="mb-0">Book Statistics</h5>
							</div>
							<div class="card-body">
								<div class="row g-4">
									<div class="col-md-4">
										<div class="text-muted small mb-1">Being Rented</div>
										<div class="h4 mb-0 text-warning" id="rentalBooks">-</div>
									</div>
									<div class="col-md-4">
										<div class="text-muted small mb-1">In Stock</div>
										<div class="h4 mb-0 text-success" id="saleBooks">-</div>
									</div>
									<div class="col-md-4">
										<div class="text-muted small mb-1">Total Stock</div>
										<div class="h4 mb-0 text-primary" id="totalStock">-</div>
									</div>
								</div>
							</div>
						</div>

						<!-- Top Most Rented Books -->
						<div class="card border-0 shadow-sm mt-4">
							<div class="card-header bg-white border-0">
								<h5 class="mb-0">Top Most Rented Books</h5>
							</div>
							<div class="card-body p-0">
								<div class="table-responsive">
									<table class="table table-hover mb-0">
										<thead class="table-light">
											<tr>
												<th class="text-center" style="width: 50px;">#</th>
												<th>Book Title</th>
												<th>Author</th>
												<th class="text-center">Times Rented</th>
												<th class="text-center">Currently Renting</th>
											</tr>
										</thead>
										<tbody id="topBooksTable">
											<tr>
												<td colspan="5" class="text-center text-muted py-4">
													<div class="spinner-border spinner-border-sm me-2"></div>
													Loading...
												</td>
											</tr>
										</tbody>
									</table>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</main>
	</div>
	
	<!-- Activities Panel (Slide from right) -->
	<div class="activities-backdrop" id="activitiesBackdrop"></div>
	<div class="activities-panel" id="activitiesPanel">
		<div class="p-3 border-bottom bg-light d-flex justify-content-between align-items-center sticky-top">
			<h5 class="mb-0">Recent Activities</h5>
			<div class="d-flex gap-2">
				<button class="btn btn-sm btn-outline-primary" id="refreshActivities" title="Refresh">
					<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="currentColor" viewBox="0 0 16 16">
						<path fill-rule="evenodd" d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z"/>
						<path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z"/>
					</svg>
				</button>
				<button class="btn btn-sm btn-outline-secondary" id="closeActivitiesPanel" title="Close">
					<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="currentColor" viewBox="0 0 16 16">
						<path d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8 2.146 2.854Z"/>
					</svg>
				</button>
			</div>
		</div>
		<div id="activitiesList" class="p-3">
			<div class="text-center text-muted py-4">
				<div class="spinner-border spinner-border-sm me-2"></div>
				Loading...
			</div>
		</div>
	</div>
	
	<div id="footerInclude" class="layout-footer" data-include="../include/footer.html"></div>

	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
	<script src="js/utils.js"></script>
	<script src="js/auth-check.js"></script>
	<script src="js/layout.js"></script>
	<script src="js/dashboard.js"></script>
</body>
</html>
