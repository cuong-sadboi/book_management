<nav class="navbar bg-white border-bottom shadow-sm py-2 px-3 px-lg-4 padd-nav">
  <div class="w-100 d-flex align-items-center gap-3">
    <div class="d-flex align-items-center gap-3">
      <a class="navbar-brand fw-bold text-primary m-0" href="dashboard.html" style="padding-left: 50px;">Book<span class="text-secondary">UI</span></a>
      <button id="sidebarToggle" class="btn btn-light border " type="button" aria-label="Toggle menu">
        <svg width="18" height="18" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M2 4h12M2 8h12M2 12h12" stroke="#5c6c7a" stroke-width="1.5" stroke-linecap="round" />
        </svg>
      </button>
    </div>

    <!-- 2 nút Profile và Logout dịch sang phải với ms-auto -->
    <div class="d-flex align-items-center gap-2 ms-auto">
      <span class="text-muted d-none d-md-inline">Welcome, <strong id="userName">Admin</strong></span>

      <a href="dashboard.html" class="btn btn-light border" type="button" aria-label="Profile" title="Profile">
        <svg width="18" height="18" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M8 8a3 3 0 1 0-3-3 3 3 0 0 0 3 3Z" stroke="#1f2a37" stroke-width="1.3"/>
          <path d="M3 13a5 5 0 0 1 10 0" stroke="#1f2a37" stroke-width="1.3" stroke-linecap="round"/>
        </svg>
      </a>
      <button class="btn btn-primary" id="logoutBtn" type="button" aria-label="Sign out" title="Logout">
        <svg width="18" height="18" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M7 3H4a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h3" stroke="#ffffff" stroke-width="1.3" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M10 11l3-3-3-3" stroke="#ffffff" stroke-width="1.3" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M6 8h7" stroke="#ffffff" stroke-width="1.3" stroke-linecap="round"/>
        </svg>
      </button>
    </div>
  </div>
</nav>

<script>
(function() {
  const AUTH_KEY = 'book_management_auth';
  
  const getAuth = () => {
    try {
      return JSON.parse(localStorage.getItem(AUTH_KEY) || 'null');
    } catch {
      return null;
    }
  };
  
  const clearAuth = () => {
    localStorage.removeItem(AUTH_KEY);
  };
  
  // Update username display
  const updateAuthUI = () => {
    const auth = getAuth();
    const userNameEl = document.getElementById('userName');
    if (auth && auth.name && userNameEl) {
      userNameEl.textContent = auth.name;
    }
  };
  
  // Logout handler
  const handleLogout = (e) => {
    e.preventDefault();
    if (confirm('Are you sure you want to logout?')) {
      clearAuth();
      window.location.href = 'login.html';
    }
  };
  
  // Initialize
  const init = () => {
    updateAuthUI();
    const logoutBtn = document.getElementById('logoutBtn');
    if (logoutBtn) {
      logoutBtn.addEventListener('click', handleLogout);
    }
  };
  
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', init);
  } else {
    init();
  }
  
  // Export for global use
  window.BookAuth = {
    getAuth,
    clearAuth,
    isLoggedIn: () => getAuth() !== null
  };
})();
</script>
